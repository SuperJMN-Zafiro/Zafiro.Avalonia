<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:FluentAvalonia.UI.Controls;assembly=FluentAvalonia">
    <Design.PreviewWith>
        <Border Padding="20">
            <StackPanel>
                <EnhancedButton Width="400" Background="Green"
                                HorizontalContentAlignment="Left" Icon="{Icon fa-wallet}" FontFamily="Times" FontSize="26" Content="This is the new button" />
                <EnhancedButton Width="400" Background="Blue" Command="{Binding NeverEndingCommand}"
                                HorizontalContentAlignment="Left" Icon="{Icon fa-wallet}" FontFamily="Times" FontSize="40" Content="This is the new button">
                    <EnhancedButton.DataContext>
                        <CommandViewModel />
                    </EnhancedButton.DataContext>
                </EnhancedButton>
                <EnhancedButton Width="400" Foreground="Red"
                                HorizontalContentAlignment="Left" Icon="{Icon fa-wallet}" FontFamily="Times" FontSize="40" Content="This is the new button">
                    <EnhancedButton.DataContext>
                        <CommandViewModel />
                    </EnhancedButton.DataContext>
                </EnhancedButton>
            </StackPanel>
        </Border>
    </Design.PreviewWith>

    <Styles.Resources>
        <ControlTheme TargetType="EnhancedButton" x:Key="{x:Type EnhancedButton}" BasedOn="{StaticResource ChromedButton}">
            <Setter Property="Spacing" Value="8" />
            <Setter Property="ContentTemplate">
                <DataTemplate>
                    <SmartDockPanel HorizontalSpacing="{Binding $parent[EnhancedButton].Spacing}">
                        <Panel VerticalAlignment="Center" x:Name="IconPanel">
                            <controls:ProgressRing Foreground="{Binding $parent[EnhancedButton].Foreground}"
                                                   IsActive="{Binding $parent[EnhancedButton].IsCommandRunning}">
                            </controls:ProgressRing>
                            <ContentControl IsVisible="{Binding !$parent[EnhancedButton].IsCommandRunning}"
                                            Content="{Binding $parent[EnhancedButton].Icon}" />
                        </Panel>
                        <ContentControl VerticalAlignment="Center" Content="{Binding }" />
                    </SmartDockPanel>
                </DataTemplate>
            </Setter>
            <Style Selector="^">
                <Setter Property="Foreground">
                    <Setter.Value>
                        <Binding Path="$self.Background"
                                 Converter="{StaticResource AutoForeground}" />
                    </Setter.Value>
                </Setter>
            </Style>
            <Style Selector="^:pointerover">
                <Setter Property="Foreground">
                    <Setter.Value>
                        <Binding Path="$self.Background"
                                 Converter="{StaticResource AutoForeground}" />
                    </Setter.Value>
                </Setter>
            </Style>
            <Style Selector="^:pressed">
                <Setter Property="Foreground">
                    <Setter.Value>
                        <Binding Path="$self.Background"
                                 Converter="{StaticResource AutoForeground}" />
                    </Setter.Value>
                </Setter>
            </Style>
            <Style Selector="^:disabled">
                <Setter Property="Foreground">
                    <Setter.Value>
                        <Binding Path="$self.Background"
                                 Converter="{StaticResource AutoForeground}" />
                    </Setter.Value>
                </Setter>
            </Style>
        </ControlTheme>
    </Styles.Resources>
</Styles>