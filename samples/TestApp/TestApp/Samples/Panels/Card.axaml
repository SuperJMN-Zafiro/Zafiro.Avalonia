<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="450"
             x:Class="TestApp.Samples.Panels.Card">
    <UserControl.Styles>
        <Style Selector="Border.card">
            <Setter Property="Background" Value="White" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="BoxShadow" Value="0 10 30 0 #19000000" />
            <Setter Property="Margin" Value="20" />
        </Style>
        <Style Selector="Border.card-header">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Color="#f5f7fa" Offset="0" />
                        <GradientStop Color="#c3cfe2" Offset="1" />
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="CornerRadius" Value="12,12,0,0" />
            <Setter Property="BorderBrush" Value="#e0e0e0" />
            <Setter Property="BorderThickness" Value="0,0,0,1" />
            <Setter Property="Padding" Value="20" />
        </Style>

        <Style Selector="Border.icon-left">
            <Setter Property="Width" Value="40" />
            <Setter Property="Height" Value="40" />
            <Setter Property="CornerRadius" Value="20" />
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Color="#667eea" Offset="0" />
                        <GradientStop Color="#764ba2" Offset="1" />
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Margin" Value="0,0,15,0" />
        </Style>

        <Style Selector="TextBlock.header-title">
            <Setter Property="FontSize" Value="18" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Foreground" Value="#333" />
            <Setter Property="TextTrimming" Value="CharacterEllipsis" />
        </Style>

        <Style Selector="TextBlock.header-subtitle">
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Foreground" Value="#666" />
            <Setter Property="Margin" Value="0,4,0,0" />
        </Style>

        <Style Selector="Button.action-btn">
            <Setter Property="Width" Value="36" />
            <Setter Property="Height" Value="36" />
            <Setter Property="Background" Value="#f0f0f0" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="Foreground" Value="#666" />
            <Setter Property="Padding" Value="0" />
        </Style>

        <Style Selector="Button.action-btn:pointerover">
            <Setter Property="Background" Value="#667eea" />
            <Setter Property="Foreground" Value="White" />
        </Style>

        <Style Selector="Button.action-btn.primary">
            <Setter Property="Background" Value="#667eea" />
            <Setter Property="Foreground" Value="White" />
        </Style>

        <Style Selector="Button.action-btn.primary:pointerover">
            <Setter Property="Background" Value="#5a6fd8" />
        </Style>

        <Style Selector="Border.card-content">
            <Setter Property="Padding" Value="24" />
        </Style>

        <Style Selector="TextBlock.content-title">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Foreground" Value="#333" />
            <Setter Property="Margin" Value="0,0,0,16" />
        </Style>

        <Style Selector="TextBlock.content-text">
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Foreground" Value="#555" />
            <Setter Property="TextWrapping" Value="Wrap" />
            <Setter Property="Margin" Value="0,0,0,16" />
        </Style>
    </UserControl.Styles>

    <Border Classes="card" MaxWidth="500">
        <StackPanel>
            <!-- Header -->
            <Border Classes="card-header">
                <FlexBox Direction="Row"
                         JustifyContent="SpaceBetween"
                         AlignItems="Center"
                         Wrap="Wrap"
                         Gap="12"
                         RowGap="8">

                    <!-- Header Left Section -->
                    <FlexBox Direction="Row"
                             AlignItems="Center"
                             FlexBox.Grow="1">

                        <!-- Left Icon -->
                        <Border Classes="icon-left">
                            <TextBlock Text="📊"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       FontSize="18" />
                        </Border>

                        <!-- Header Text -->
                        <StackPanel FlexBox.Grow="1">
                            <TextBlock Classes="header-title" Text="Dashboard Analytics con título muy largo que fuerza wrap" />
                            <TextBlock Classes="header-subtitle" Text="Estadísticas en tiempo real" />
                        </StackPanel>
                    </FlexBox>

                    <!-- Header Actions -->
                    <FlexBox Direction="Row"
                             AlignItems="Center"
                             Gap="8">
                        <Button Classes="action-btn" Content="⭐" ToolTip.Tip="Favorito" />
                        <Button Classes="action-btn" Content="📤" ToolTip.Tip="Compartir" />
                        <Button Classes="action-btn" Content="🔔" ToolTip.Tip="Notificaciones" />
                        <Button Classes="action-btn" Content="⬇️" ToolTip.Tip="Descargar" />
                        <Button Classes="action-btn primary" Content="⚙️" ToolTip.Tip="Más opciones" />
                    </FlexBox>
                </FlexBox>
            </Border>

            <!-- Content -->
            <Border Classes="card-content">
                <StackPanel>
                    <TextBlock Classes="content-title" Text="Resumen de Actividad" />

                    <TextBlock Classes="content-text"
                               Text="Esta card utiliza FlexPanel con el comportamiento corregido para ser fiel a CSS Flexbox." />

                    <TextBlock Classes="content-text"
                               Text="• JustifyContent SpaceBetween en primera línea&#x0a;• Los botones se alinean a la derecha cuando hacen wrap&#x0a;• Comportamiento idéntico al CSS Flexbox estándar&#x0a;• Gap y RowGap para espaciado consistente&#x0a;• FlexPanel.Grow para distribución de espacio" />

                    <TextBlock Classes="content-text"
                               Text="Con la corrección en GetJustifyContentOffset, ahora el comportamiento es exactamente igual que CSS cuando los elementos hacen wrap." />
                </StackPanel>
            </Border>
        </StackPanel>
    </Border>
</UserControl>